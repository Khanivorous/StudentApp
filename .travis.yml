sudo: true
language: java
dist: bionic
jdk:
  - openjdk10


stages:
- test
- cucumber_test

env:
  global:
    secure: Cn1s935dA3wFJH2EsbAVJXOG1y07EHkhuMesUsTC6HPEFNYvpWKO/vOZHbjQB0nW6z44O6Go4J7jGE9AFLQZSwgeVPuuJau3/+SPB3f/XNO1BG7DgTVyYebRnjT5LbqdRBkwOPPhfWOrMCz7eAYRlMrVbTYbMtJnw5tzTJlfualbvPXoP/vGthNLOoFe3/TXHN/KiJxkxDj+nGDpfqGiW1zdpZhBNWtfNuBalkUz3CnKMdVHicVo08t0qX2xy+cWIC7O8WZyirY+g1HhkKVmdCFhNSsWDWvSOL0gOEwan+BDOpCzvSCzZh23discfO1KdYM3N8/1dmRNZc+/l+vW8iF7N9jA+VQ7TKmGSpbuKEMMqTqpPL/PzlFN+ChcJ9h8Bam3mbuqPC/UlhzsVzqevdwl0Iu4xQV9R76qUpw6+QxbBAlawJ1ghqKqr0j/8vud5CnYOV2PjQVlEdtHP1T67WRRbvsmklHcN4o5s+ntq2pdf9XDEoRxAsu8e/i2djhB3h0/rs1QDi6yO8vcEMAGS5r42TtyLCAkq92fjQOqJj/jM/r8+n//fImRTOLRFm+NgOZmeaoRpalaKSf08hWAiibCNwMlRTpsBZnbvNzBzPovQXqDRy0Hl6lV0uS3f2tclN0lFUmDDcC2iZaoRMwA9apPuym6l18RO3UiyqrNCgM=

jobs:
  include:
    - stage: test
      name: "Unit Tests"
      script: ./gradlew test

    - stage: cucumber_test
      name: "Cucumber Tests"
      script: ./gradlew cucumber
      os:
        - linux
        - osx

after_success:
- bash <(curl -s https://codecov.io/bash)
- ./gradlew jacocoTestReport

before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/